/*! For license information please see swag-pay-pal.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["swag-pay-pal"],{6280:(t,e,r)=>{var o=r(8254),i=r(3206),n=r(4690),a=r(6285);function s(t){var e="";return Object.keys(t).forEach((function(r){0!==e.length&&(e+="&"),e+=r+"="+t[r]})),e}function l(t,e){void 0===e&&(e={});var r=document.createElement("script");return r.src=t,Object.keys(e).forEach((function(t){r.setAttribute(t,e[t]),"data-csp-nonce"===t&&r.setAttribute("nonce",e["data-csp-nonce"])})),r}function c(t,e){if(void 0===e&&(e=Promise),u(t,e),"undefined"==typeof document)return e.resolve(null);var r=function(t){var e="https://www.paypal.com/sdk/js";t.sdkBaseUrl&&(e=t.sdkBaseUrl,delete t.sdkBaseUrl);var r=t,o=Object.keys(r).filter((function(t){return void 0!==r[t]&&null!==r[t]&&""!==r[t]})).reduce((function(t,e){var o,i=r[e].toString();return o=function(t,e){return(e?"-":"")+t.toLowerCase()},"data"===(e=e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,o)).substring(0,4)||"crossorigin"===e?t.attributes[e]=i:t.queryParams[e]=i,t}),{queryParams:{},attributes:{}}),i=o.queryParams,n=o.attributes;return i["merchant-id"]&&-1!==i["merchant-id"].indexOf(",")&&(n["data-merchant-id"]=i["merchant-id"],i["merchant-id"]="*"),{url:"".concat(e,"?").concat(s(i)),attributes:n}}(t),o=r.url,i=r.attributes,n=i["data-namespace"]||"paypal",a=d(n);return function(t,e){var r=document.querySelector('script[src="'.concat(t,'"]'));if(null===r)return null;var o=l(t,e),i=r.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(o.dataset).length)return null;var n=!0;return Object.keys(i.dataset).forEach((function(t){i.dataset[t]!==o.dataset[t]&&(n=!1)})),n?r:null}(o,i)&&a?e.resolve(a):function(t,e){void 0===e&&(e=Promise);u(t,e);var r=t.url,o=t.attributes;if("string"!=typeof r||0===r.length)throw new Error("Invalid url.");if(void 0!==o&&"object"!=typeof o)throw new Error("Expected attributes to be an object.");return new e((function(t,e){if("undefined"==typeof document)return t();!function(t){var e=t.url,r=t.attributes,o=t.onSuccess,i=t.onError,n=l(e,r);n.onerror=i,n.onload=o,document.head.insertBefore(n,document.head.firstElementChild)}({url:r,attributes:o,onSuccess:function(){return t()},onError:function(){var t=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return e(t)}})}))}({url:o,attributes:i},e).then((function(){var t=d(n);if(t)return t;throw new Error("The window.".concat(n," global variable is not available."))}))}function d(t){return window[t]}function u(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class h{constructor(){p(this,"loadingScript",!1),p(this,"paypal",null),p(this,"callbacks",[])}}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const y=["card","bancontact","blik","eps","giropay","ideal","mybank","p24","sepa","sofort","venmo"];class b extends a.Z{_init(){this.options.partOfDomContentLoading||"complete"===document.readyState?super._init():window.addEventListener("load",(()=>{super._init()}))}get scriptOptionsHash(){return JSON.stringify(this.getScriptOptions())}async createScript(t){var e,r,o;null!==(o=(e=b.scriptPromises)[r=this.scriptOptionsHash])&&void 0!==o||(e[r]=this._loadScript());const i=async()=>{t(await b.scriptPromises[this.scriptOptionsHash])};this.options.scriptAwaitVisibility?await this._awaitVisibility(i):await i(),this._createScriptLegacy(t)}async _awaitVisibility(t){const e=new IntersectionObserver((([r])=>{r.isIntersecting&&(e.disconnect(),t())}),{rootMargin:"200px"});e.observe(this.el)}async _loadScript(){return await c(this.getScriptOptions()),b.paypal[this.scriptOptionsHash]=window.paypal,delete window.paypal,b.paypal[this.scriptOptionsHash]}getScriptOptions(){const t={components:"buttons,messages,card-fields,funding-eligibility,applepay,googlepay","client-id":this.options.clientId,commit:!!this.options.commit,locale:this.options.languageIso,currency:this.options.currency,intent:this.options.intent,"enable-funding":"paylater,venmo"};return(this.options.disablePayLater||!1===this.options.showPayLater)&&(t["enable-funding"]="venmo"),!1===this.options.useAlternativePaymentMethods?t["disable-funding"]=y.join(","):Array.isArray(this.options.disabledAlternativePaymentMethods)&&(t["disable-funding"]=this.options.disabledAlternativePaymentMethods.join(",")),this.options.merchantPayerId&&(t["merchant-id"]=this.options.merchantPayerId),this.options.clientToken&&(t["data-client-token"]=this.options.clientToken),this.options.userIdToken&&(t["data-user-id-token"]=this.options.userIdToken),this.options.partnerAttributionId&&(t["data-partner-attribution-id"]=this.options.partnerAttributionId),t}callCallbacks(){this.constructor.scriptLoading.callbacks.forEach((t=>{b.scriptPromises[this.scriptOptionsHash].then((e=>t.call(this,e)))}))}_createScriptLegacy(t){this.constructor.scriptLoading.callbacks.push(t)}}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=v(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},g.apply(this,arguments)}function v(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}f(b,"scriptLoading",new h),f(b,"options",{clientId:"",merchantPayerId:"",partnerAttributionId:"",currency:"EUR",intent:"capture",commit:!0,languageIso:"en_GB",scriptAwaitVisibility:!1,partOfDomContentLoading:!0}),f(b,"scriptPromises",{}),f(b,"paypal",{});class O extends b{constructor(...t){super(...t),m(this,"GENERIC_ERROR","SWAG_PAYPAL__GENERIC_ERROR"),m(this,"NOT_ELIGIBLE","SWAG_PAYPAL__NOT_ELIGIBLE"),m(this,"USER_CANCELLED","SWAG_PAYPAL__USER_CANCELLED"),m(this,"BROWSER_UNSUPPORTED","SWAG_PAYPAL__BROWSER_UNSUPPORTED")}handleError(t,e=!1,r){r&&"string"!=typeof r&&(r=String(r));const o=this._extractErrorCode(r);var i;(o&&(t=o),this.options.handleErrorUrl)?this._client.post(this.options.handleErrorUrl,JSON.stringify({code:t,error:r,fatal:e}),(()=>{this.onErrorHandled(t,e,r)})):console.error(`PayPal ${e?"fatal ":""}error occurred: ${t} - ${String(null!==(i=r)&&void 0!==i?i:"")}`)}onErrorHandled(t,e,r){window.scrollTo(0,0),window.location.reload()}onFatalError(t){this.handleError(this.GENERIC_ERROR,!0,t)}onError(t){this.handleError(this.GENERIC_ERROR,!1,t)}onCancel(t){this.handleError(this.USER_CANCELLED,!1,t)}createError(t,e,r=""){const o=this.options.addErrorUrl;this.options.accountOrderEditCancelledUrl&&this.options.accountOrderEditFailedUrl?window.location="cancel"===t?this.options.accountOrderEditCancelledUrl:this.options.accountOrderEditFailedUrl:(e&&"string"!=typeof e&&(e=String(e)),this._client.post(o,JSON.stringify({error:e,type:t}),(()=>{r?window.location=r:(window.onbeforeunload=()=>{window.scrollTo(0,0)},window.location.reload())})))}_extractErrorCode(t){try{var e;const r=null===(e=JSON.parse(t))||void 0===e?void 0:e.errors;if(!Array.isArray(r))return null;for(const t of r)if("object"==typeof t&&"string"==typeof t.code)return t.code}catch(t){}return null}}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=S(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},w.apply(this,arguments)}function S(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}function C(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}m(O,"options",{...g(P(O),"options",O),addErrorUrl:"",handleErrorUrl:""});class A extends O{constructor(...t){super(...t),C(this,"GENERIC_ERROR","SWAG_PAYPAL__EXPRESS_GENERIC_ERROR"),C(this,"USER_CANCELLED","SWAG_PAYPAL__EXPRESS_USER_CANCELLED")}init(){this._client=new o.Z,this.createButton()}createButton(){this.createScript((t=>{this.renderButton(t)}))}renderButton(t){return t.Buttons(this.getButtonConfig()).render(this.el)}getBuyButtonState(){if(!this.options.addProductToCart)return{element:null,disabled:!1};const t=i.Z.querySelector(this.el.closest("form"),this.options.buyButtonSelector);return{element:t,disabled:t.disabled}}observeBuyButton(t,e,r,o={attributes:!0}){const i=new MutationObserver((t=>{t.forEach((t=>{if("disabled"===t.attributeName){const{disabled:t}=this.getBuyButtonState();if(t)return void r();e()}}))}));return i.observe(t,o),i}getButtonConfig(){const t=this.el,{element:e,disabled:r}=this.getBuyButtonState();return{onInit:(o,i)=>{if(!this.options.addProductToCart)return;const n=()=>{i.enable(),t.classList.remove(this.options.disabledClass)},a=()=>{i.disable(),t.classList.add(this.options.disabledClass)};this.observeBuyButton(e,n,a),r?a():n()},style:{size:this.options.buttonSize,shape:this.options.buttonShape,color:this.options.buttonColor,tagline:this.options.tagline,layout:"vertical",label:"checkout",height:40},createOrder:this.createOrder.bind(this),onApprove:this.onApprove.bind(this),onCancel:this.onCancel.bind(this),onError:this.onError.bind(this)}}createOrder(){const t={paymentMethodId:this.options.payPalPaymentMethodId,deleteCart:this.options.addProductToCart};return new Promise(((e,r)=>{this._client.post(this.options.contextSwitchUrl,JSON.stringify(t),((t,o)=>(o.status>=400&&r(t),Promise.resolve().then((()=>this.options.addProductToCart?this.addProductToCart():Promise.resolve())).then((()=>this._createOrder())).then((t=>{e(t)})).catch((t=>{r(t)})))))}))}_createOrder(){return new Promise(((t,e)=>{this._client.post(this.options.createOrderUrl,new FormData,((r,o)=>{o.status>=400&&e(r);try{const e=JSON.parse(r);t(e.token)}catch(t){e(t)}}))}))}addProductToCart(){const t=this.el.closest("form"),e=i.Z.querySelector(t,this.options.buyButtonSelector),r=window.PluginManager.getPluginInstanceFromElement(t,"AddToCart");return new Promise((t=>{r.$emitter.subscribe("openOffCanvasCart",(()=>{t()})),e.click()}))}onApprove(t,e){const r={token:t.orderID};n.Z.create(document.body),this._client.post(this.options.prepareCheckoutUrl,JSON.stringify(r),((t,r)=>r.status<400?e.redirect(this.options.checkoutConfirmUrl):this.onError()))}onErrorHandled(t,e,r){t===this.GENERIC_ERROR||t===this.USER_CANCELLED?(window.scrollTo(0,0),window.location=this.options.cancelRedirectUrl):super.onErrorHandled(t,e,r)}}C(A,"scriptLoading",new h),C(A,"options",{...w(E(A),"options",A),disabledClass:"is-disabled",buyButtonSelector:".btn-buy",buttonColor:"gold",buttonShape:"rect",buttonSize:"small",tagline:!1,addProductToCart:!1,contextSwitchUrl:"",payPalPaymentMethodId:"",createOrderUrl:"",deleteCartUrl:"",prepareCheckoutUrl:"",checkoutConfirmUrl:"",addErrorUrl:"",cancelRedirectUrl:"",showPayLater:!0,useAlternativePaymentMethods:!1,commit:!1,scriptAwaitVisibility:!0,partOfDomContentLoading:!1});var _,j,F,R=r(207),I=r(5659);function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=L(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},N.apply(this,arguments)}function L(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}class B extends O{init(){this._client=new o.Z,this.createButton()}createButton(){this.createScript((t=>{this.renderButton(t)}))}renderButton(t){return this.confirmOrderForm=i.Z.querySelector(document,this.options.confirmOrderFormSelector),i.Z.querySelector(this.confirmOrderForm,this.options.confirmOrderButtonSelector).classList.add("d-none"),t.Buttons(this.getButtonConfig()).render(this.el)}getButtonConfig(){return{style:{size:this.options.buttonSize,shape:this.options.buttonShape,color:this.options.buttonColor,label:"pay"},createOrder:this.createOrder.bind(this),onApprove:this.onApprove.bind(this),onCancel:this.onCancel.bind(this),onClick:this.onClick.bind(this),onError:this.onError.bind(this)}}createOrder(){if(!this.confirmOrderForm.checkValidity())throw new Error("Checkout form not valid");const t=R.Z.serialize(this.confirmOrderForm);t.set("product","spb");const e=this.options.orderId;return null!==e&&t.set("orderId",e),new Promise(((e,r)=>{this._client.post(this.options.createOrderUrl,t,((t,o)=>{o.status>=400&&r(t);try{const r=JSON.parse(t);e(r.token)}catch(t){r(t)}}))}))}onApprove(t){I.Z.create();const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","paypalOrderId"),e.setAttribute("value",t.orderID),this.confirmOrderForm.appendChild(e),this.confirmOrderForm.submit()}onClick(t,e){return this.confirmOrderForm.checkValidity()?e.resolve():e.reject()}}_=B,j="options",F={...N(U(B),"options",B),buttonColor:"gold",buttonShape:"rect",buttonSize:"small",useAlternativePaymentMethods:!0,disabledAlternativePaymentMethods:[],showPayLater:!0,createOrderUrl:"",orderId:null,accountOrderEditFailedUrl:"",accountOrderEditCancelledUrl:"",confirmOrderFormSelector:"#confirmOrderForm",confirmOrderButtonSelector:'button[type="submit"]',addErrorUrl:"",userIdToken:null},(j=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(j))in _?Object.defineProperty(_,j,{value:F,enumerable:!0,configurable:!0,writable:!0}):_[j]=F;class k extends a.Z{init(){i.Z.querySelector(document,this.options.confirmOrderFormSelector).addEventListener("submit",this.onConfirmCheckout.bind(this)),this.createPaymentWall()}createPaymentWall(){this.paypal=window.PAYPAL,this.paypal.apps.PPP({placeholder:this.options.placeholder,approvalUrl:this.options.approvalUrl,mode:this.options.mode,country:this.options.customerCountryIso,buttonLocation:this.options.buttonLocation,language:this.options.customerSelectedLanguage,useraction:this.options.userAction,surcharging:this.options.surcharging,showLoadingIndicator:this.options.showLoadingIndicator,showPuiOnSandbox:this.options.showPuiOnSandbox,onLoad:this.onPaymentSelectionLoad})}onConfirmCheckout(t){t.preventDefault();const e=t.target;if(!e.checkValidity())return;this._client=new o.Z;const r=R.Z.serialize(e);n.Z.create(document.body);const i=this.options.orderId;null!==i&&r.set("orderId",i),this._client.post(this.options.handlePaymentUrl,r,this.afterPayOrder.bind(this))}afterPayOrder(t){const e=JSON.parse(t);"plusPatched"===e.redirectUrl?this.paypal.apps.PPP.doCheckout():window.location.href=e.redirectUrl}onPaymentSelectionLoad(){document.$emitter.publish("paypalPlusSelectionLoaded")}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=D(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},T.apply(this,arguments)}function D(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(k,"options",{placeholder:"ppplus",approvalUrl:"",paypalPaymentId:"",paypalToken:"",customerCountryIso:"",mode:"live",buttonLocation:"outside",preSelection:"paypal",userAction:"commit",customerSelectedLanguage:"en_GB",surcharging:!1,showLoadingIndicator:!0,showPuiOnSandbox:!0,handlePaymentUrl:"",isEnabledParameterName:"isPayPalPlusCheckout",languageId:null,orderId:null,confirmOrderFormSelector:"#confirmOrderForm"});class Z extends O{init(){this.createInstallmentBanner()}createInstallmentBanner(){this.createScript((t=>{t.Messages(this.getBannerConfig()).render(this.el)}))}getBannerConfig(){var t;return{amount:this.options.amount,buyerCountry:null!==(t=this.options.crossBorderBuyerCountry)&&void 0!==t?t:void 0,currency:this.options.currency,style:{layout:this.options.layout,color:this.options.color,ratio:this.options.ratio,logo:{type:this.options.logoType},text:{color:this.options.textColor}}}}}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Z,"options",{...T(x(Z),"options",Z),crossBorderBuyerCountry:void 0,amount:0,layout:"text",color:"blue",ratio:"8x1",logoType:"primary",textColor:"black",useAlternativePaymentMethods:!1,commit:!1,scriptAwaitVisibility:!0,partOfDomContentLoading:!1});var M=r(1110);function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=V(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},G.apply(this,arguments)}function V(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function z(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class H extends O{init(){this.confirmOrderForm=i.Z.querySelector(document,this.options.confirmOrderFormSelector),this.options.preventErrorReload?i.Z.querySelector(this.confirmOrderForm,this.options.confirmOrderButtonSelector).disabled="disabled":(i.Z.querySelector(this.confirmOrderForm,this.options.confirmOrderButtonSelector).classList.add("d-none"),this._client=new o.Z,this.createScript((t=>{this.render(t)})))}render(t){const e=t.Buttons(this.getButtonConfig(this.getFundingSource(t)));e.isEligible()?e.render(this.el):this.handleError(this.NOT_ELIGIBLE,!0,`Funding for PayPal button is not eligible (${this.getFundingSource(t)})`)}getFundingSource(t){return t.FUNDING.PAYPAL}getButtonConfig(t){return{fundingSource:t,style:{size:this.options.buttonSize,shape:this.options.buttonShape,color:this.options.buttonColor,label:"pay"},createOrder:this.createOrder.bind(this,this.constructor.product),onApprove:this.onApprove.bind(this),onCancel:this.onCancel.bind(this),onClick:this.onClick.bind(this),onError:this.onError.bind(this)}}createOrder(t){const e=R.Z.serialize(this.confirmOrderForm);e.set("product",t);const r=this.options.orderId;return null!==r&&e.set("orderId",r),new Promise(((t,r)=>{this._client.post(this.options.createOrderUrl,e,((e,o)=>{o.status>=400&&r(e);try{const r=JSON.parse(e);t(r.token)}catch(t){r(t)}}))}))}onApprove(t){var e;I.Z.create();const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","paypalOrderId"),r.setAttribute("value",null!==(e=t.orderID)&&void 0!==e?e:t.orderId),this.confirmOrderForm.appendChild(r),i.Z.querySelector(this.confirmOrderForm,this.options.confirmOrderButtonSelector).click()}onClick(t,e){return this.confirmOrderForm.checkValidity()?e.resolve():e.reject()}}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=W(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Y.apply(this,arguments)}function W(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J(t)}function $(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}z(H,"scriptLoading",new h),z(H,"product","spb"),z(H,"options",{...G(q(H),"options",H),clientToken:"",buttonColor:null,buttonShape:"rect",buttonSize:"small",createOrderUrl:"",orderId:null,accountOrderEditFailedUrl:"",accountOrderEditCancelledUrl:"",confirmOrderFormSelector:"#confirmOrderForm",confirmOrderButtonSelector:'button[type="submit"]',preventErrorReload:!1,brandName:""});class Q extends H{render(t){this.cardFieldForm=i.Z.querySelector(document,this.options.cardFieldFormSelector);const e=t.CardFields(this.getFieldConfig());if(e.isEligible())this.cardFieldForm.classList.remove("d-none"),this.renderIndividualFields(e),this.bindFieldActions(e);else{const e=t.Buttons(this.getButtonConfig(t.FUNDING.CARD));if(!e.isEligible())return void this.handleError(this.NOT_ELIGIBLE,!0,"Neither hosted fields nor standalone buttons are eligible");e.render(this.el)}}getFieldConfig(){return{createOrder:this.createOrder.bind(this,"acdc"),onError:this.onError.bind(this),onApprove:this.onApprove.bind(this),style:this.options.cardFieldStyleConfig}}renderIndividualFields(t){this.fields={},this.fields.cardNameField=t.NameField({placeholder:i.Z.querySelector(this.cardFieldForm,this.options.cardNameFieldSelector).dataset.placeholder}),this.fields.cardNameField.render(this.options.cardNameFieldSelector),this.fields.cardNumberField=t.NumberField({placeholder:i.Z.querySelector(this.cardFieldForm,this.options.cardNumberFieldSelector).dataset.placeholder}),this.fields.cardNumberField.render(this.options.cardNumberFieldSelector),this.fields.cardCvvField=t.CVVField({placeholder:i.Z.querySelector(this.cardFieldForm,this.options.cardCvvFieldSelector).dataset.placeholder}),this.fields.cardCvvField.render(this.options.cardCvvFieldSelector),this.fields.cardExpiryField=t.ExpiryField({placeholder:i.Z.querySelector(this.cardFieldForm,this.options.cardExpiryFieldSelector).dataset.placeholder}),this.fields.cardExpiryField.render(this.options.cardExpiryFieldSelector)}bindFieldActions(t){i.Z.querySelector(this.confirmOrderForm,this.options.confirmOrderButtonSelector).classList.remove("d-none"),this.confirmOrderForm.addEventListener("submit",this.onFieldSubmit.bind(this,t)),window.PluginManager.getPluginInstanceFromElement(this.confirmOrderForm,"FormAddHistory").options.entries=[]}onFieldSubmit(t,e){R.Z.serialize(this.confirmOrderForm).has("paypalOrderId")||this.confirmOrderForm.checkValidity()&&(e.preventDefault(),e.stopPropagation(),t.getState().then((e=>{var r;if(e.isFormValid)return void t.submit();new M.Z(i.Z.querySelector(this.confirmOrderForm,this.options.confirmOrderButtonSelector)).remove();const o=Object.keys(e.fields).find((t=>!e.fields[t].isValid));null===(r=this.fields[o])||void 0===r||r.focus(),window.scrollTo({top:this.getScrollOffset(i.Z.querySelector(this.cardFieldForm,this.options[o+"Selector"])),behavior:"smooth"})})))}onApprove(t){var e;I.Z.create();const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","paypalOrderId"),r.setAttribute("value",null!==(e=t.orderID)&&void 0!==e?e:t.orderId),this.confirmOrderForm.appendChild(r),this.confirmOrderForm.submit()}getScrollOffset(t){let e=t.getBoundingClientRect().top+window.scrollY-this.options.scrollOffset;const r=i.Z.querySelector(document,this.options.fixedHeaderSelector,!1);if(r){e-=r.getBoundingClientRect().height}return e}}$(Q,"scriptLoading",new h),$(Q,"options",{...Y(J(Q),"options",Q),buttonColor:"black",cardFieldFormSelector:"#swag-paypal-acdc-form",cardNumberFieldSelector:"#swag-paypal-acdc-form-cardnumber",cardExpiryFieldSelector:"#swag-paypal-acdc-form-expiration",cardCvvFieldSelector:"#swag-paypal-acdc-form-cvv",cardNameFieldSelector:"#swag-paypal-acdc-form-cardholder",scrollOffset:15,fixedHeaderSelector:"header.fixed-top",validatedStyleClass:"was-validated",cardFieldStyleConfig:{input:{"font-family":'"Inter", sans-serif',"font-size":"0.875rem","font-weight":300,"letter-spacing":"0.03rem",padding:"0.5625rem"},"input::placeholder":{color:"#c3c3c3",opacity:1},body:{padding:0},"input.card-field-number.display-icon":{"padding-left":"calc(2rem + 40px) !important"}}});var X=r(7906);class K extends a.Z{init(){new X.Z(this.el).create(),this._client=new o.Z,this.poll()}poll(){this._client.get(this.options.pollingUrl,this.onPollingResult.bind(this))}onPollingResult(t,e){417!==e.status?e.status>=400?window.location=this.options.errorUrl:window.location=this.options.successUrl:this.retryPolling()}retryPolling(){setTimeout(this.poll.bind(this),this.options.pollingInterval)}}function tt(){return tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=et(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},tt.apply(this,arguments)}function et(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rt(t)););return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(K,"options",{pollingUrl:"",successUrl:"",errorUrl:"",paymentInstructions:null,pollingInterval:2e3});class ot extends H{getFundingSource(t){return t.FUNDING.SEPA}}function it(){return it="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=nt(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},it.apply(this,arguments)}function nt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}function st(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(ot,"options",{...tt(rt(ot),"options",ot),buttonColor:"silver"});class lt extends H{getFundingSource(t){return t.FUNDING.VENMO}}function ct(){return ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=dt(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},ct.apply(this,arguments)}function dt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}st(lt,"product","venmo"),st(lt,"options",{...it(at(lt),"options",lt),buttonColor:"blue"});class pt extends H{async render(t){var e,r;null!==(e=window.ApplePaySession)&&void 0!==e&&e.supportsVersion(4)&&null!==(r=window.ApplePaySession)&&void 0!==r&&r.canMakePayments()?this.renderButton(t).catch(this.onFatalError.bind(this)):this.handleError(this.BROWSER_UNSUPPORTED,!0,"Browser does not support Apple Pay")}async renderButton(t){const e=await t.Applepay().config(),r=document.createElement("apple-pay-button");r.setAttribute("buttonStyle","black"),r.setAttribute("type","buy"),r.style.width="100%",r.addEventListener("click",(()=>{this.confirmOrderForm.checkValidity()&&this.handleApplePayButtonSubmit(e,t).catch(this.onError.bind(this))})),e.isEligible?this.el.appendChild(r):this.handleError(this.NOT_ELIGIBLE,!0,"Funding for Apple Pay is not eligible")}async handleApplePayButtonSubmit(t,e){const{countryCode:r,merchantCapabilities:o,supportedNetworks:i,currencyCode:n}=t,a={countryCode:r,merchantCapabilities:o,supportedNetworks:i,currencyCode:n,requiredShippingContactFields:[],requiredBillingContactFields:[],billingContact:{...this.options.billingAddress,addressLines:[this.options.billingAddress.addressLines]},total:{label:this.options.brandName,type:"final",amount:this.options.totalPrice}},s=new window.ApplePaySession(4,a);s.onvalidatemerchant=this.handleValidateMerchant.bind(this,s,e),s.onpaymentauthorized=this.handlePaymentAuthorized.bind(this,s,e),s.oncancel=this.onCancel.bind(this),s.begin()}async handleValidateMerchant(t,e,r){try{const{merchantSession:o}=await e.Applepay().validateMerchant({validationUrl:r.validationURL,displayName:this.options.brandName});t.completeMerchantValidation(o)}catch(e){this.onError(e),t.abort()}}async handlePaymentAuthorized(t,e,r){try{const o=await this.createOrder("applepay");await e.Applepay().confirmOrder({orderId:o,token:r.payment.token,billingContact:{...this.options.billingAddress,addressLines:[this.options.billingAddress.addressLines]}}),t.completePayment(window.ApplePaySession.STATUS_SUCCESS),this.onApprove({orderId:o})}catch(e){this.onError(e),t.abort()}}}function ht(){return ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=ft(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},ht.apply(this,arguments)}function ft(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(pt,"options",{...ct(ut(pt),"options",pt),totalPrice:void 0,brandName:void 0,billingAddress:void 0});class bt extends H{init(){super.init(),this.options.preventErrorReload||n.Z.create(this.el)}async render(t){await this.renderGooglePay(t).catch(this.onFatalError.bind(this)),n.Z.remove(this.el)}async renderGooglePay(t){var e,r,o,i;if(null===(e=window)||void 0===e||null===(r=e.google)||void 0===r||null===(o=r.payments)||void 0===o||null===(i=o.api)||void 0===i||!i.PaymentsClient)throw new Error("Google Pay script wasn't load");const{isEligible:n,apiVersion:a,apiVersionMinor:s,allowedPaymentMethods:l,merchantInfo:c,countryCode:d}=await t.Googlepay().config();if(!n)return void this.handleError(this.NOT_ELIGIBLE,!0,"Funding for Google Pay is not eligible");const u=this.createGPClient(t),{result:p}=await u.isReadyToPay({apiVersion:a,apiVersionMinor:s,allowedPaymentMethods:l});if(!p)return void this.handleError(this.BROWSER_UNSUPPORTED,!0,"Browser does not support Google Pay");const h={apiVersion:a,apiVersionMinor:s,allowedPaymentMethods:l,merchantInfo:{...c,merchantName:this.options.brandName},callbackIntents:["PAYMENT_AUTHORIZATION"],transactionInfo:{countryCode:d,totalPriceStatus:"ESTIMATED",totalPriceLabel:"Grand Total",currencyCode:this.options.currency,totalPrice:this.options.totalPrice,displayItems:Object.values(this.options.displayItems)}};u.prefetchPaymentData(h);const f=u.createButton({allowedPaymentMethods:l,onClick:()=>{this.confirmOrderForm.checkValidity()&&u.loadPaymentData(h).catch()}});this.el.appendChild(f)}async onPaymentAuthorized(t,e){const r=await this.createOrder("googlepay").catch((t=>{throw this.onError(t),t})),o=await t.Googlepay().confirmOrder({orderId:r,paymentMethodData:e.paymentMethodData});if(!["APPROVED","PAYER_ACTION_REQUIRED"].includes(o.status))throw new Error("PayPal didn't approve the transaction.");"PAYER_ACTION_REQUIRED"===o.status&&await t.Googlepay().initiatePayerAction({orderId:r}),this.onApprove({orderId:r})}createGPClient(t){return new window.google.payments.api.PaymentsClient({environment:this.options.sandbox?"TEST":"PRODUCTION",paymentDataCallbacks:{onPaymentAuthorized:e=>this.onPaymentAuthorized(t,e).then((()=>({transactionState:"SUCCESS"}))).catch((t=>({transactionState:"ERROR",error:{intent:"PAYMENT_AUTHORIZATION",message:t.message||"TRANSACTION FAILED"}})))}})}}function mt(){return mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=gt(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},mt.apply(this,arguments)}function gt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vt(t)););return t}function vt(t){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vt(t)}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(bt,"options",{...ht(yt(bt),"options",bt),totalPrice:void 0,sandbox:!0,displayItems:{}});class Pt extends H{getFundingSource(t){return t.FUNDING.PAYLATER}}function Ot(){return Ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var o=wt(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Ot.apply(this,arguments)}function wt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=St(t)););return t}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},St(t)}function Et(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}!function(t,e,r){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(Pt,"options",{...mt(vt(Pt),"options",Pt),buttonColor:"gold"});class Ct extends O{init(){this._client=new o.Z,this.createScript((t=>{this.checkFunding(t)}))}checkFunding(t){const e=this.constructor.fundingSources.filter((e=>!t.isFundingEligible(t.FUNDING[e])));e.sort().join(",")!==this.options.filteredPaymentMethods.sort().join(",")&&this.updateMethodEligibility(e)}updateMethodEligibility(t){this._client.post(this.options.methodEligibilityUrl,JSON.stringify({paymentMethods:t}),(()=>{this.options.filteredPaymentMethods=t}))}}Et(Ct,"fundingSources",["CARD","SEPA","VENMO","PAYLATER"]),Et(Ct,"options",{...Ot(St(Ct),"options",Ct),filteredPaymentMethods:[],methodEligibilityUrl:"",useAlternativePaymentMethods:!1,commit:!1,scriptAwaitVisibility:!0,partOfDomContentLoading:!1});const At=window.PluginManager;At.register("SwagPayPalExpressButton",A,"[data-swag-paypal-express-button]"),At.register("SwagPayPalSmartPaymentButtons",B,"[data-swag-paypal-smart-payment-buttons]"),At.register("SwagPaypalAcdcFields",Q,"[data-swag-paypal-acdc-fields]"),At.register("SwagPayPalPlusPaymentWall",k,"[data-swag-paypal-payment-wall]"),At.register("SwagPayPalInstallmentBanner",Z,"[data-swag-paypal-installment-banner]"),At.register("SwagPaypalPuiPolling",K,"[data-swag-paypal-pui-polling]"),At.register("SwagPaypalSepa",ot,"[data-swag-paypal-sepa]"),At.register("SwagPaypalVenmo",lt,"[data-swag-paypal-venmo]"),At.register("SwagPaypalApplePay",pt,"[data-swag-paypal-apple-pay]"),At.register("SwagPaypalGooglePay",bt,"[data-swag-paypal-google-pay]"),At.register("SwagPaypalPayLater",Pt,"[data-swag-paypal-pay-later]"),At.register("SwagPaypalFundingEligibility",Ct,"[data-swag-paypal-funding-eligibility]")}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=6280,t(t.s=e);var e}));t.O()}]);