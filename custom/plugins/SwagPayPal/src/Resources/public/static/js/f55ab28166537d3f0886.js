(this["webpackJsonpPluginswag-pay-pal"]=this["webpackJsonpPluginswag-pay-pal"]||[]).push([[2],{"d+it":function(n,e,a){},nGvL:function(n,e,a){var t=a("d+it");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);(0,a("P8hj").default)("f1e34b98",t,!0,{})},"tS/h":function(n,e,a){"use strict";a.r(e);var t=a("VNL/"),l=(a("nGvL"),a("zgN8"));function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,e){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.push.apply(a,t)}return a}function o(n,e,a){return(e=function(n){var e=function(n,e){if("object"!==s(n)||null===n)return n;var a=n[Symbol.toPrimitive];if(void 0!==a){var t=a.call(n,e||"default");if("object"!==s(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===s(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var c=Shopware.Defaults,r=Shopware.Data.Criteria;e.default=Shopware.Component.wrapComponentConfig({template:'{% block swag_paypal %}\n<sw-page class="swag-paypal">\n\n    {% block swag_paypal_header %}\n    <template #smart-bar-header>\n        <h2>\n            {{ $tc(\'sw-settings.index.title\') }}\n            <sw-icon name="regular-chevron-right-xs" small></sw-icon>\n            {{ $tc(\'swag-paypal.header\') }}\n        </h2>\n    </template>\n    {% endblock %}\n\n    {% block swag_paypal_actions %}\n    <template #smart-bar-actions>\n\n        {% block swag_paypal_actions_save %}\n        <sw-button-process\n            {% if VUE3 %}\n            v-model:value="isSaveSuccessful"\n            {% else %}\n            v-model="isSaveSuccessful"\n            {% endif %}\n            class="sw-settings-login-registration__save-action"\n            variant="primary"\n            :isLoading="isLoading"\n            :disabled="isLoading || savingDisabled || hasError || !acl.can(\'swag_paypal.editor\')"\n            @click="onSave"\n        >\n            {{ $tc(\'global.default.save\') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    {% block swag_paypal_content %}\n    <template #content>\n\n        {% block swag_paypal_content_card %}\n        <sw-card-view>\n\n            {% block swag_paypal_content_tabs %}\n            <sw-tabs\n                default-item="general"\n                position-identifier="swag-paypal-content-tabs"\n            >\n                <template #default="{ active }">\n                    <sw-tabs-item\n                        key="general"\n                        :active-tab="active"\n                        :route="{ name: \'swag.paypal.index\', params: { tab: \'general\' } }"\n                    >\n                        {{ $tc(\'swag-paypal.tabs.general\') }}\n                    </sw-tabs-item>\n                    <sw-tabs-item\n                        key="storefront"\n                        :active-tab="active"\n                        :route="{ name: \'swag.paypal.index\', params: { tab: \'storefront\' } }"\n                    >\n                        {{ $tc(\'swag-paypal.tabs.storefront\') }}\n                    </sw-tabs-item>\n                    <sw-tabs-item\n                        key="advanced"\n                        :active-tab="active"\n                        :route="{ name: \'swag.paypal.index\', params: { tab: \'advanced\' } }"\n                    >\n                        {{ $tc(\'swag-paypal.tabs.advanced\') }}\n                    </sw-tabs-item>\n                </template>\n            </sw-tabs>\n            {% endblock %}\n\n            {% block swag_paypal_content_card_channel_config %}\n            <sw-sales-channel-config\n                {% if VUE3 %}\n                v-model:value="config"\n                {% else %}\n                v-model="config"\n                {% endif %}\n                ref="configComponent"\n                domain="SwagPayPal.settings"\n            >\n\n                {% block swag_paypal_content_card_channel_config_sales_channel %}\n                <template #select="{ onInput, selectedSalesChannelId }">\n\n                    {% block swag_paypal_content_card_channel_config_sales_channel_card %}\n                    <sw-card\n                        position-identifier="swag-paypal-sales-channel-card"\n                        :title="$tc(\'global.entities.sales_channel\', 2)"\n                    >\n\n                        {% block swag_paypal_content_card_channel_config_sales_channel_card_title %}\n                        <sw-single-select\n                            {% if VUE3 %}\n                            v-model:value="selectedSalesChannelId"\n                            {% else %}\n                            v-model="selectedSalesChannelId"\n                            {% endif %}\n                            labelProperty="translated.name"\n                            valueProperty="id"\n                            :isLoading="isLoading"\n                            :options="salesChannels"\n                            :disabled="!acl.can(\'swag_paypal.editor\')"\n                            @change="onInput"\n                        />\n                        {% endblock %}\n\n                        {% block swag_paypal_content_card_channel_config_sales_channel_card_footer %}\n                        <template #footer>\n\n                            {% block swag_paypal_content_card_channel_config_sales_channel_card_footer_container %}\n                            <sw-container\n                                columns="2fr 1fr"\n                                gap="0px 30px"\n                            >\n\n                                {% block swag_paypal_content_card_channel_config_sales_channel_card_footer_container_text %}\n                                <p>{{ $tc(\'swag-paypal.saleschannelCard.button.description\') }}</p>\n                                {% endblock %}\n\n                                {% block swag_paypal_content_card_channel_config_sales_channel_card_footer_container_button %}\n                                <sw-button-process\n                                    {% if VUE3 %}\n                                    v-model:processSuccess="isSetDefaultPaymentSuccessful"\n                                    {% else %}\n                                    v-model="isSetDefaultPaymentSuccessful"\n                                    {% endif %}\n                                    :isLoading="isSettingDefaultPaymentMethods"\n                                    :disabled="!acl.can(\'swag_paypal.editor\')"\n                                    @click="onSetPaymentMethodDefault"\n                                >\n                                    {{ $tc(\'swag-paypal.saleschannelCard.button.label\') }}\n                                </sw-button-process>\n                                {% endblock %}\n\n                            </sw-container>\n                            {% endblock %}\n\n                        </template>\n                        {% endblock %}\n\n                    </sw-card>\n                    {% endblock %}\n\n                </template>\n                {% endblock %}\n\n                {% block swag_paypal_content_card_channel_config_cards %}\n                <template #content="{ actualConfigData, allConfigs, selectedSalesChannelId }">\n                    {% block swag_paypal_content_card_channel_config_webhook %}\n                    <swag-paypal-webhook\n                        v-if="tab === \'advanced\'"\n                        :isLoading="isLoading"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_cross_border %}\n                    <swag-paypal-cross-border\n                        v-if="tab === \'advanced\'"\n                        :isLoading="isLoading"\n                        :actual-config-data="actualConfigData"\n                        :all-configs="allConfigs"\n                        :selected-sales-channel-id="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_credentials_card %}\n                        <swag-paypal-credentials\n                            v-if="tab === \'general\'"\n                            :actualConfigData="actualConfigData"\n                            :allConfigs="allConfigs"\n                            :selectedSalesChannelId="selectedSalesChannelId"\n                            :clientIdErrorState="clientIdErrorState"\n                            :clientSecretErrorState="clientSecretErrorState"\n                            :clientIdSandboxErrorState="clientIdSandboxErrorState"\n                            :clientSecretSandboxErrorState="clientSecretSandboxErrorState"\n                            :clientIdFilled="clientIdFilled"\n                            :clientSecretFilled="clientSecretFilled"\n                            :clientIdSandboxFilled="clientIdSandboxFilled"\n                            :clientSecretSandboxFilled="clientSecretSandboxFilled"\n                            :isLoading="isLoading"\n                        />\n                    {% endblock %}\n\n                    {# @deprecated tag:v10.0.0 - Will be removed without replacement #}\n                    {% block swag_paypal_content_card_channel_config_plus %}\n                    <swag-paypal-plus\n                        v-if="showPlusCard && tab === \'storefront\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_behavior %}\n                    <swag-paypal-behavior\n                        v-if="tab === \'general\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_vaulting %}\n                    <swag-paypal-vaulting\n                        v-if="tab === \'general\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                        :isSaveSuccessful="isSaveSuccessful"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_express %}\n                    <swag-paypal-express\n                        v-if="tab === \'storefront\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                        @preventSave="preventSave"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_installment %}\n                    <swag-paypal-installment\n                        v-if="tab === \'storefront\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_acdc %}\n                    <swag-paypal-acdc\n                        v-if="tab === \'general\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_pui %}\n                    <swag-paypal-pui\n                        v-if="tab === \'general\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                    />\n                    {% endblock %}\n\n                    {% block swag_paypal_content_card_channel_config_spb %}\n                    <swag-paypal-spb\n                        v-if="showSPBCard && tab === \'storefront\'"\n                        :actualConfigData="actualConfigData"\n                        :allConfigs="allConfigs"\n                        :selectedSalesChannelId="selectedSalesChannelId"\n                        @preventSave="preventSave"\n                    />\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n            </sw-sales-channel-config>\n            {% endblock %}\n\n            {% block swag_paypal_content_card_loading %}\n            <sw-loader v-if="isLoading"/>\n            {% endblock %}\n\n        </sw-card-view>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n</sw-page>\n{% endblock %}\n',inject:["SwagPayPalApiCredentialsService","SwagPaypalPaymentMethodService","repositoryFactory","acl"],mixins:[Shopware.Mixin.getByName("notification")],data:function(){return function(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){o(n,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}))}return n}({isLoading:!1,isSaveSuccessful:!1,isTestSuccessful:!1,isTestSandboxSuccessful:!1,clientIdFilled:!1,clientSecretFilled:!1,clientIdSandboxFilled:!1,clientSecretSandboxFilled:!1,sandboxChecked:!1,salesChannels:[],config:{},isSetDefaultPaymentSuccessful:!1,isSettingDefaultPaymentMethods:!1,savingDisabled:!1,messageBlankErrorState:{code:1,detail:this.$tc("swag-paypal.messageNotBlank")},showCredentials:!1,allowShowCredentials:!0},l.a)},metaInfo:function(){return{title:this.$createTitle()}},setup:function(){return{configComponent:Object(t.a)(null)}},computed:{showSPBCard:function(){var n,e,a,t,l,s,i,o;if(null===(n=this.configComponent)||void 0===n||null===(e=n.allConfigs)||void 0===e||!e.null)return!0;var c=null!==(a=this.config["SwagPayPal.settings.merchantLocation"])&&void 0!==a?a:null===(t=this.configComponent)||void 0===t||null===(l=t.allConfigs)||void 0===l?void 0:l.null["SwagPayPal.settings.merchantLocation"],r=null!==(s=this.config["SwagPayPal.settings.plusCheckoutEnabled"])&&void 0!==s?s:null===(i=this.configComponent)||void 0===i||null===(o=i.allConfigs)||void 0===o?void 0:o.null["SwagPayPal.settings.plusCheckoutEnabled"];return c!==this.MERCHANT_LOCATION_GERMANY||!r},showPlusCard:function(){return!this.showSPBCard},salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},clientIdErrorState:function(){return this.isLoading||this.sandboxChecked||this.clientIdFilled?null:this.messageBlankErrorState},clientSecretErrorState:function(){return this.isLoading||this.sandboxChecked||this.clientSecretFilled?null:this.messageBlankErrorState},clientIdSandboxErrorState:function(){return this.isLoading||!this.sandboxChecked||this.clientIdSandboxFilled?null:this.messageBlankErrorState},clientSecretSandboxErrorState:function(){return this.isLoading||!this.sandboxChecked||this.clientSecretSandboxFilled?null:this.messageBlankErrorState},hasError:function(){return!this.sandboxChecked&&!(this.clientIdFilled&&this.clientSecretFilled)||this.sandboxChecked&&!(this.clientIdSandboxFilled&&this.clientSecretSandboxFilled)},salesChannelCriteria:function(){var n=new r(1,500);return n.addFilter(r.equalsAny("typeId",[c.storefrontSalesChannelTypeId,c.apiSalesChannelTypeId])),n},tab:function(){return this.$route.params.tab||"general"}},watch:{config:{deep:!0,handler:function(){var n,e,a,t=null===(n=this.configComponent)||void 0===n||null===(e=n.allConfigs)||void 0===e?void 0:e.null;null===(null===(a=this.configComponent)||void 0===a?void 0:a.selectedSalesChannelId)?(this.clientIdFilled=!!this.config["SwagPayPal.settings.clientId"],this.clientSecretFilled=!!this.config["SwagPayPal.settings.clientSecret"],this.clientIdSandboxFilled=!!this.config["SwagPayPal.settings.clientIdSandbox"],this.clientSecretSandboxFilled=!!this.config["SwagPayPal.settings.clientSecretSandbox"],this.sandboxChecked=!!this.config["SwagPayPal.settings.sandbox"]):(this.clientIdFilled=!!this.config["SwagPayPal.settings.clientId"]||!(null==t||!t["SwagPayPal.settings.clientId"]),this.clientSecretFilled=!!this.config["SwagPayPal.settings.clientSecret"]||!(null==t||!t["SwagPayPal.settings.clientSecret"]),this.clientIdSandboxFilled=!!this.config["SwagPayPal.settings.clientIdSandbox"]||!(null==t||!t["SwagPayPal.settings.clientIdSandbox"]),this.clientSecretSandboxFilled=!!this.config["SwagPayPal.settings.clientSecretSandbox"]||!(null==t||!t["SwagPayPal.settings.clientSecretSandbox"]),this.sandboxChecked=!!this.config["SwagPayPal.settings.sandbox"]||!(null==t||!t["SwagPayPal.settings.sandbox"]))}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var n=this;this.$route.params.tab||this.$router.push({name:"swag.paypal.index",params:{tab:"general"}}),this.isLoading=!0,this.salesChannelRepository.search(this.salesChannelCriteria,Shopware.Context.api).then((function(e){e.add({id:null,translated:{name:n.$tc("sw-sales-channel-switch.labelDefaultOption")}}),n.salesChannels=e})).finally((function(){n.isLoading=!1}))},onSave:function(){this.hasError||this.save()},onChangeLoading:function(n){this.isLoading=n},save:function(){var n,e=this;this.isLoading=!0,null===(n=this.configComponent)||void 0===n||n.save().then((function(n){if(e.isSaveSuccessful=!0,n.payPalWebhookErrors){var a=e.$tc("swag-paypal.settingForm.messageWebhookError");n.payPalWebhookErrors.forEach((function(n){e.createNotificationError({message:"".concat(a,"<br><br><ul><li>").concat(n,"</li></ul>")})}))}})).finally((function(){e.isLoading=!1}))},onSetPaymentMethodDefault:function(){var n,e=this;this.isSettingDefaultPaymentMethods=!0,this.SwagPaypalPaymentMethodService.setDefaultPaymentForSalesChannel(null===(n=this.configComponent)||void 0===n?void 0:n.selectedSalesChannelId).then((function(){e.isSettingDefaultPaymentMethods=!1,e.isSetDefaultPaymentSuccessful=!0}))},preventSave:function(n){this.savingDisabled=!!n},onChangeCredentialsVisibility:function(n){this.showCredentials=n}}})},zgN8:function(n,e,a){"use strict";e.a={MERCHANT_LOCATION_GERMANY:"germany",MERCHANT_LOCATION_OTHER:"other"}}}]);